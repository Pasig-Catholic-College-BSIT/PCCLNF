<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Learning JSON</title>
</head>
<body>
  <h1 id="greeting">Loading...</h1>
  <button id="logout-btn">Log out</button>

  <pre id="data"></pre>

<script>
  const CURRENT_USER_KEY = 'currentUser';
  const greetingEl = document.getElementById('greeting');
  const dataEl = document.getElementById('data');
  const logoutBtn = document.getElementById('logout-btn');

  // Read the logged-in user from localStorage
  const raw = localStorage.getItem(CURRENT_USER_KEY);
  if (!raw) {
    // Not logged in â€” go back to login page
    alert('You must be logged in to view this page.');
    window.location.href = 'index.html';
  } else {
    const user = JSON.parse(raw);
    greetingEl.textContent = `Hello, ${user.username}! Role: ${user.role || 'student'}`;

    // Example: display a local JSON object or fetch a file
    // If you have a learning.json file you can fetch it; here we'll show a demo object
    const example = {
      lessons: [
        { id: 1, title: "Intro to HTML", completed: false },
        { id: 2, title: "JavaScript Basics", completed: false }
      ],
      user
    };
    dataEl.textContent = JSON.stringify(example, null, 2);
  }

  logoutBtn.addEventListener('click', () => {
    localStorage.removeItem(CURRENT_USER_KEY);
    // Optionally keep users list; redirect back to login
    window.location.href = 'index.html';
  });
</script>
</body>
</html>